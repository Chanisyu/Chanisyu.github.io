<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>前端项目的搭建 &mdash; sunseekers</title>
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/primer-css/css/primer.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/collection.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/common.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/responsive.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/posts/index.css">
    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="canonical" href="http://localhost:4000/2019/07/08/vue-cli/">
    <link rel="alternate" type="application/atom+xml" title="sunseekers" href="http://localhost:4000/feed.xml">
    <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
    
    <meta property="og:title" content="前端项目的搭建">
      
    <meta name="keywords" content="前端项目的搭建">
    <meta name="og:keywords" content="前端项目的搭建">
      
    <meta name="description" content="vue 搭建项目一直都是从事用 vue 进行工作开发，参与过大小项目的开发，自己参与过。虽然项目 build 之后都是一堆看不懂的文件，但是对于开发而言，关系可大了，会影响开发">
    <meta name="og:description" content="vue 搭建项目一直都是从事用 vue 进行工作开发，参与过大小项目的开发，自己参与过。虽然项目 build 之后都是一堆看不懂的文件，但是对于开发而言，关系可大了，会影响开发">
      
    
    
        
    
    <meta property="og:url" content="http://localhost:4000/2019/07/08/vue-cli/">
    <meta property="og:site_name" content="sunseekers">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2019-07-08">
    
    <script src="http://localhost:4000/assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="http://localhost:4000/assets/js/jquery-ui.js"></script>
    <script type="text/javascript">
    function toggleMenu() {
        var nav = document.getElementsByClassName("site-header-nav")[0];
        if (nav.style.display == "inline-flex") {
          nav.style.display = "none";
        } else {
          nav.style.display = "inline-flex";
        }
    }
    </script>
</head>
<body class="" data-mz="">
    <header class="site-header">
        <div class="container">
            <h1><a href="http://localhost:4000/" title="sunseekers"><span class="octicon octicon-mark-github"></span> sunseekers</a></h1>
            <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <nav class="site-header-nav" role="navigation">
                
                <a href="http://localhost:4000/" class=" site-header-nav-item" target="" title="Home">Home</a>
                
                <a href="http://localhost:4000/categories/" class=" site-header-nav-item" target="" title="Blog">Blog</a>
                
                <a href="http://localhost:4000/open-source/" class=" site-header-nav-item" target="" title="Open-source">Open-source</a>
                
                <a href="http://localhost:4000/wiki/" class=" site-header-nav-item" target="" title="Wiki">Wiki</a>
                
                <a href="http://localhost:4000/links/" class=" site-header-nav-item" target="" title="Link">Link</a>
                
                <a href="http://localhost:4000/about/" class=" site-header-nav-item" target="" title="About">About</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->


    <section class="collection-head small geopattern" data-pattern-id="前端项目的搭建">
<div class="container">
  <div class="columns">
    <div class="column three-fourths">
      <div class="collection-title">
        <h1 class="collection-header">前端项目的搭建</h1>
        <div class="collection-info">
          
          <span class="meta-info">
            <span class="octicon octicon-calendar"></span> 2019/07/08
          </span>
          
          
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href="http://localhost:4000/categories/#项目搭建" title="项目搭建">项目搭建</a>
          </span>
          
          
        </div>
      </div>
    </div>
  </div>
</div>
</section>
<!-- / .banner -->
<section class="container content">
<div class="columns">
  <div class="column three-fourths" >
    <article class="article-content markdown-body">
    <h1 id="vue-搭建项目">vue 搭建项目</h1>
<p>一直都是从事用 <code class="highlighter-rouge">vue</code> 进行工作开发，参与过大小项目的开发，自己参与过。虽然项目 <code class="highlighter-rouge">build</code> 之后都是一堆看不懂的文件，
但是对于开发而言，关系可大了，会影响开发</p>

<h2 id="接触过的项目目录结构">接触过的项目目录结构</h2>

<p>工作之初接触的项目的 <code class="highlighter-rouge">main.js</code>，项目很大，是一个后台供应链管理系统，新功能还在继续（附一）。</p>

<p>代码又臭又长，所有逻辑都放在 <code class="highlighter-rouge">main.js</code> 里面，随着项目变大，这个文件还在继续添加东西，这样写是功能是没有任何问题，有些可以拆分的没有拆分，有些插件
只在某一个页面引用了，却在全局注册，问题都不大。可是我看着心里难受，这不符合我想要的规范。</p>

<p>工作时间长了，接触到一些其他项目，人家的 <code class="highlighter-rouge">main.js</code>(附二)，一眼望去言简意赅，代码里面没有像之前一样混入路由拦截。到后期项目变大了，维护起来也很方便。
见到附二写法的时候，感叹到，这代码还可以这样写，长见识了。因为之前接触都是附一那样的代码</p>

<p>附一：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import Vue from 'vue'
import App from './App'
import ElementUI from 'element-ui'
import '../public/static/css/theme-green/index.css'
import VueRouter from 'vue-router'
import store from './vuex/store'
import VueResource from 'vue-resource'
import filters from './filters'
import utils from 'utility'
import storage from './utils/storage'
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'
import sock from './utils/sock'
import sockHead from './utils/sockHead'
import routes from './routes'
import userApi from './api/sys/userApi'
// import Status from './constants/status'
import Constant from './constants/constant'
import VueLazyload from 'vue-lazyload' //懒加载
import VueAMap from 'vue-amap';
import { log } from 'util';
var infiniteScroll =  require('vue-infinite-scroll')
import VCharts from 'v-charts'
Vue.use(VCharts)
Vue.use(VueLazyload)
Vue.use(infiniteScroll)
Vue.use(ElementUI)
Vue.use(VueRouter)
Vue.use(VueResource)
Vue.use(VueAMap);
//Vue.use(Vuex)
let singleFlag = false

Vue.http.interceptors.push(function (request, next) {
  let timestamp = utils.timestamp()+'';
  let token = window.sessionStorage.getItem('token')
  let signature = null
  if (request.url.indexOf('/login') &lt;= 0) {
    if(token){
      signature = utils.md5(Constant.PRIMARY_KEY + timestamp + token)
      request.headers.set('token', token)
    }else{
      window.location.href="/"
    }
  } else {
    signature = utils.md5(Constant.PRIMARY_KEY+timestamp)
  }
  request.headers.set('timestamp', timestamp)
  request.headers.set('signature', signature)
  if (!request.body) request.body = {}

  next(function (response) {
      if(response.status!==200){
          return  Vue.prototype.$message('请求异常')
      }
      if (response.body.result.code &amp;&amp; response.body.result.code === "W0005") {
          store.dispatch('showMsg', '身份信息已过期，请重新登录')
          window.location.href="/"
          return request.respondWith(response.body, {
              status: 404,
              statusText: 'Not found'
          })
      }
      if (!response.body.result.success) {
      let errorCode = response.body.result.code
      let msg = response.body.result.msg
      if (errorCode &amp;&amp; errorCode === "W0001") {
        singleFlag = true
        Vue.prototype.$alert(msg, '提示', {
          confirmButtonText: '确定',
          callback: () =&gt; {
            singleFlag = false
            window.location.href="/"
          }
        });
        return
      }
      if(singleFlag) return ;
      if (errorCode &amp;&amp; errorCode === "W0002") {
        store.dispatch('showMsg', msg)
        window.location.href="/"
      }else{
        store.dispatch('showMsg', msg)
        return request.respondWith(response.body, {
          status: 404,
          statusText: 'Not found'
        })
      }
    }
    return response
  })
})

Object.keys(filters).forEach((key) =&gt; {
  Vue.filter(key, filters[key])
})

const router = new VueRouter({
  routes,
  hashbang: false,
  history: true,
  root: '/',
  saveScrollPosition: true
})

router.beforeEach((to, from, next) =&gt; {
  NProgress.start()
  let sysUser = store.getters.sysUser
  if (to.meta.noAuth || sysUser) {
    if (sysUser &amp;&amp; !sysUser.isInternal) {
      setRights(sysUser, to)
    }
    next()
  } else {
    let token = window.sessionStorage.getItem('token')
    if (token) {
      sysUser = storage.getStorJson('personInfo');
      store.dispatch('signIn', sysUser)
      if (!sysUser.isInternal) setRights(sysUser, to)
      next()
    } else {
      next('/')
    }
  }
})

router.afterEach(transition =&gt; {
  NProgress.done()
})

// ====================
// 获取当前菜单权限
// ====================
function setRights (sysUser, to) {
  if (to.meta.rights) return false
  let menus = sysUser.permissionList
  menus.forEach((menu) =&gt; {
    if (menu.uri) {
      let menuRights = []
      menus.forEach((right) =&gt; {
        menuRights.push(right)
      })
      to.meta.rights = menuRights
      return false
    }
  })
  if(user.id) sock.init(user.id)
  /** suming */
  let clearMenus = user.permissions
  for(let item of clearMenus){
    if(item.uri &amp;&amp; item.uri=="/waitCheckList"){
      sockHead.init(user.name,user.id)
      break
    }
  }
  /** end */
}
function getSum(array,n,sum){
  array.forEach(el=&gt;{

  })
}
new Vue({
  router,
  store,
  render: h =&gt; h(App),
}).$mount('#app')

</code></pre></div></div>

<p>附二:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import Vue from 'vue'
import App from './App.vue'
import router from './router'
// HACK: 应按需引入
import Vant from 'vant'
import 'vant/lib/index.css'
// 导入重置样式
import '@/assets/css/common.scss'
import resources, { WebSocket } from '@/resources'

Vue.use(Vant)

if ('token' in localStorage) {
  resources.setToken(localStorage.token)
  WebSocket.connect()
}

Vue.config.productionTip = false

new Vue({
  router,
  render: h =&gt; h(App)
}).$mount('#app')

</code></pre></div></div>

    </article>
    <!--<img src="/images/life/004.jpeg" width="25%" height="25%" style="vertical-align:middle;margin-left: 30%"/>-->
    <div style="padding-top:20px;">
      <hr/>
      <p>一名伪程序猿——sunseekers，曾被bug虐的体无完肤，却依旧待他如初恋。</p>

      <p>如果我改过的某一个bug，吐槽过的某一个需求，写过的某一行代码</p>

      <p>曾在你的心里荡起涟漪，那至少说明在逝去的岁月里，我们在某一刻，共同经历着一样的情愫。</p>

      <p>有时候，虽然素未谋面。却已相识很久，很微妙也很知足。 </p>

      <p>如果你喜欢我写过的某一个文字，请支持我，鼓励我，你的鼓励是我最大的动力来源</p>

      <p>当然恰好你也喜欢我的话，我们可以互相关注，相互学习的哟！</p>
    </div>
    <div class="share">
      <div class="share-component"></div>
    </div>
    <div class="comment">
      

  

  
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        <script>
        var gitalk = new Gitalk({
            id: '/2019/07/08/vue-cli/',
            clientID: '7ffc0aeedcc0dc7f5fb6',
            clientSecret: 'c910965c927d40783d363d7e21197ccf35c317b3',
            repo: 'sunseekers',
            owner: 'sunseekers',
            admin: ['sunseekers'],
            labels: ['gitment'],
            perPage: 50,
        })
        gitalk.render('gitalk-container')
        </script>
  


    </div>
  </div>
  <div class="column one-fourth">
    
<h3>Search</h3>
<div id="site_search">
    <input type="text" id="search_box" placeholder="Search">
</div>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/modules/sidebar-search.css">
<script src="http://localhost:4000/assets/js/jekyll-search.min.js"></script>
<script src="http://localhost:4000/assets/js/search.js"></script>

<script type="text/javascript">
SimpleJekyllSearch({
    searchInput: document.getElementById('search_box'),
    resultsContainer: document.getElementById('search_results'),
    json: 'http://localhost:4000/assets/search_data.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 10,
    fuzzy: false,
    exclude: ['Welcome']
})
</script>

    

    
<h3 class="post-directory-title mobile-hidden">Table of Contents</h3>
<div id="post-directory-module" class="mobile-hidden">
  <section class="post-directory">
  <!-- Links that trigger the jumping -->
  <!-- Added by javascript below -->
  <dl></dl>
  </section>
</div>

<script src="http://localhost:4000/assets/js/jquery.toc.js"></script>

  </div>
</div>
</section>
<!-- /section.content -->


    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2018
                    <span title="sunseekers">sunseekers</span>
                    <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:window.scrollTo(0,0)" >TOP</a>
                </li>
            </ul>
            <a href="http://github.com/DWJWendy/DWJWendy.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="http://localhost:4000/" title="Home" target="">Home</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/categories/" title="Blog" target="">Blog</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/open-source/" title="Open-source" target="">Open-source</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/wiki/" title="Wiki" target="">Wiki</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/links/" title="Link" target="">Link</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/about/" title="About" target="">About</a>
                </li>
                
                <li><a href="http://localhost:4000/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <!-- / footer -->
    <script src="http://localhost:4000/assets/vendor/share.js/dist/js/share.min.js"></script>
    <script src="http://localhost:4000/assets/js/geopattern.js"></script>
    <script src="http://localhost:4000/assets/js/prism.js"></script>
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/prism.css">
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>

    

    

    

    

    
    <div style="display:none">
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-80669434-1', 'auto');
        ga('send', 'pageview');

      </script>
    </div>
    
</body>
</html>

